(()=>{"use strict";const e=window.wp.i18n;document.addEventListener("DOMContentLoaded",function(){function t(t){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{const e=wp.data.dispatch("core/notices");if(e&&e.createErrorNotice)return void e.createErrorNotice(t,{id:"replace-media-error",isDismissible:!0})}catch(e){}window.alert((0,e.__)("Error:","replace-media")+" "+t)}function a(){document.querySelectorAll(".replace-media-button").forEach(e=>{e.removeEventListener("click",n),e.addEventListener("click",n)})}function n(a){a.preventDefault();const n=this.getAttribute("data-attachment-id");if(!n)return;const i=document.createElement("input");i.type="file",i.style.display="none",document.body.appendChild(i);const c=this;i.addEventListener("change",function(){if(0===this.files.length)return void document.body.removeChild(i);const a=this.files[0];c.disabled=!0,c.textContent=(0,e.__)("Replacingâ€¦","replace-media"),function(a,n,i){const c=new FormData;c.append("action","replace_media_file"),c.append("nonce",window.replaceMediaData.nonce),c.append("attachment_id",a),c.append("replacement_file",n),fetch(window.replaceMediaData.ajaxUrl,{method:"POST",body:c,credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(a=>{a.success?window.location.reload():(t(a.data||(0,e.__)("Error replacing file.","replace-media")),i&&(i.disabled=!1,i.textContent=(0,e.__)("Replace File","replace-media")))}).catch(a=>{t((0,e.__)("Error replacing file:","replace-media")+a.message),i&&(i.disabled=!1,i.textContent=(0,e.__)("Replace File","replace-media"))})}(n,a,c),document.body.removeChild(i)}),i.click()}void 0!==window.replaceMediaData&&(a(),wp.media&&wp.media.frame&&wp.media.frame.on("open",a),document.addEventListener("click",function(e){e.target&&e.target.classList.contains("attachment-details")&&a()}))})})();