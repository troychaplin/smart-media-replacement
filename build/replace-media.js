(()=>{"use strict";const e=window.wp.i18n;document.addEventListener("DOMContentLoaded",function(){if(void 0!==window.replaceMediaData&&(i(),"undefined"!=typeof wp&&wp.media)){const e=wp.media.view.Attachment.Details;e&&(wp.media.view.Attachment.Details=e.extend({render(){return e.prototype.render.apply(this,arguments),setTimeout(i,100),this}}))}function t(t){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{const e=wp.data.dispatch("core/notices");if(e&&e.createErrorNotice)return void e.createErrorNotice(t,{id:"replace-media-error",isDismissible:!0})}catch(e){}window.alert((0,e.__)("Error:","replace-media")+" "+t)}function i(){document.querySelectorAll(".replace-media-button").forEach(e=>{e.removeEventListener("click",n),e.addEventListener("click",n)})}function n(i){i.preventDefault();const n=this.getAttribute("data-attachment-id");if(!n)return;const a=document.createElement("input");a.type="file",a.style.display="none",document.body.appendChild(a);const r=this;a.addEventListener("change",function(){if(0===this.files.length)return void document.body.removeChild(a);const i=this.files[0];r.disabled=!0,r.textContent=(0,e.__)("Replacingâ€¦","replace-media"),function(i,n,a){const r=new FormData;r.append("action","replace_media_file"),r.append("nonce",window.replaceMediaData.nonce),r.append("attachment_id",i),r.append("replacement_file",n),fetch(window.replaceMediaData.ajaxUrl,{method:"POST",body:r,credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(i=>{i.success?window.location.reload():(t(i.data||(0,e.__)("Error replacing file.","replace-media")),a&&(a.disabled=!1,a.textContent=(0,e.__)("Replace File","replace-media")))}).catch(i=>{t((0,e.__)("Error replacing file:","replace-media")+i.message),a&&(a.disabled=!1,a.textContent=(0,e.__)("Replace File","replace-media"))})}(n,i,r),document.body.removeChild(a)}),a.click()}})})();