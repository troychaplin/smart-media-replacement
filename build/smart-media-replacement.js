(()=>{"use strict";const e=window.wp.i18n;document.addEventListener("DOMContentLoaded",function(){if(void 0!==window.replaceMediaData&&(n(),"undefined"!=typeof wp&&wp.media)){const e=wp.media.view.Attachment.Details;e&&(wp.media.view.Attachment.Details=e.extend({render(){return e.prototype.render.apply(this,arguments),setTimeout(n,100),this}}))}function t(t){const n="replace-media-error-notice",i=document.getElementById(n);i&&i.remove();const a=document.createElement("div");a.id=n,a.className="notice notice-error is-dismissible",a.style.marginTop="20px",a.style.marginBottom="20px";const o=document.createElement("p");o.innerHTML="<strong>"+(0,e.__)("Media Replacement Error:","smart-media-replacement")+"</strong> "+t,a.appendChild(o);const r=document.createElement("button");r.type="button",r.className="notice-dismiss",r.innerHTML='<span class="screen-reader-text">'+(0,e.__)("Dismiss this notice.","smart-media-replacement")+"</span>",r.addEventListener("click",function(){a.remove()}),a.appendChild(r);const c=document.querySelector(".wrap h1")||document.querySelector(".wrap h2")||document.querySelector("#wpbody-content .wrap");if(c)"H1"===c.tagName||"H2"===c.tagName?c.parentNode.insertBefore(a,c.nextSibling):c.insertBefore(a,c.firstChild);else{const e=document.getElementById("wpbody-content");e&&e.insertBefore(a,e.firstChild)}setTimeout(function(){a.parentNode&&(a.style.transition="opacity 0.3s",a.style.opacity="0",setTimeout(function(){a.remove()},300))},1e4),a.scrollIntoView({behavior:"smooth",block:"nearest"})}function n(){document.querySelectorAll(".replace-media-button").forEach(e=>{e.removeEventListener("click",i),e.addEventListener("click",i)})}function i(n){n.preventDefault();const i=this.getAttribute("data-attachment-id");if(!i)return;const a=document.createElement("input");a.type="file",a.style.display="none",document.body.appendChild(a);const o=this;a.addEventListener("change",function(){if(0===this.files.length)return void document.body.removeChild(a);const n=this.files[0];o.disabled=!0,o.textContent=(0,e.__)("Replacingâ€¦","smart-media-replacement"),function(n,i,a){const o=new FormData;o.append("action","replace_media_file"),o.append("nonce",window.replaceMediaData.nonce),o.append("attachment_id",n),o.append("replacement_file",i),fetch(window.replaceMediaData.ajaxUrl,{method:"POST",body:o,credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(n=>{n.success?window.location.reload():(t(n.data||(0,e.__)("Error replacing file.","smart-media-replacement")),a&&(a.disabled=!1,a.textContent=(0,e.__)("Replace File","smart-media-replacement")))}).catch(n=>{t((0,e.__)("Error replacing file:","smart-media-replacement")+" "+n.message),a&&(a.disabled=!1,a.textContent=(0,e.__)("Replace File","smart-media-replacement"))})}(i,n,o),document.body.removeChild(a)}),a.click()}})})();