(()=>{"use strict";const e=window.wp.i18n;document.addEventListener("DOMContentLoaded",function(){if(void 0!==window.replaceMediaData&&(n(),"undefined"!=typeof wp&&wp.media)){const e=wp.media.view.Attachment.Details;e&&(wp.media.view.Attachment.Details=e.extend({render(){return e.prototype.render.apply(this,arguments),setTimeout(n,100),this}}))}function t(t){if("undefined"!=typeof wp&&wp.data&&wp.data.dispatch)try{const e=wp.data.dispatch("core/notices");if(e&&e.createErrorNotice)return void e.createErrorNotice(t,{id:"replace-media-error",isDismissible:!0})}catch(e){}window.alert((0,e.__)("Error:","smart-media-replacement")+" "+t)}function n(){document.querySelectorAll(".replace-media-button").forEach(e=>{e.removeEventListener("click",a),e.addEventListener("click",a)})}function a(n){n.preventDefault();const a=this.getAttribute("data-attachment-id");if(!a)return;const i=document.createElement("input");i.type="file",i.style.display="none",document.body.appendChild(i);const r=this;i.addEventListener("change",function(){if(0===this.files.length)return void document.body.removeChild(i);const n=this.files[0];r.disabled=!0,r.textContent=(0,e.__)("Replacingâ€¦","smart-media-replacement"),function(n,a,i){const r=new FormData;r.append("action","replace_media_file"),r.append("nonce",window.replaceMediaData.nonce),r.append("attachment_id",n),r.append("replacement_file",a),fetch(window.replaceMediaData.ajaxUrl,{method:"POST",body:r,credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(n=>{n.success?window.location.reload():(t(n.data||(0,e.__)("Error replacing file.","smart-media-replacement")),i&&(i.disabled=!1,i.textContent=(0,e.__)("Replace File","smart-media-replacement")))}).catch(n=>{t((0,e.__)("Error replacing file:","smart-media-replacement")+n.message),i&&(i.disabled=!1,i.textContent=(0,e.__)("Replace File","smart-media-replacement"))})}(a,n,r),document.body.removeChild(i)}),i.click()}})})();